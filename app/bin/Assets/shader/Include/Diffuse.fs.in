#ifndef CAST_SHADOW
    #define CAST_SHADOW 0
#endif

precision highp float;

#if (CAST_SHADOW == 0)
	UniformTexture(0, 1) uniform sampler2D u_texture;

	UniformBuffer(0, 2) uniform UniformBuffer02
	{
		vec4 u_light_color;
		vec4 u_light_dir;
		float u_light_intensity;
	} buf_0_2;

	Input(0) vec2 v_uv;
	Input(1) vec3 v_normal;

	Output(0) vec4 o_frag;
#endif

void main()
{
#if (CAST_SHADOW == 0)
    vec4 c = texture(u_texture, v_uv);
    vec3 n = normalize(v_normal);
    vec3 l = normalize(-buf_0_2.u_light_dir.xyz);
    
    float nl = max(dot(n, l), 0.0);
    vec3 diff = c.rgb * nl * buf_0_2.u_light_color.rgb * buf_0_2.u_light_intensity;

    c.rgb = diff;
    c.a = 1.0;

    o_frag = c;
#endif
}
